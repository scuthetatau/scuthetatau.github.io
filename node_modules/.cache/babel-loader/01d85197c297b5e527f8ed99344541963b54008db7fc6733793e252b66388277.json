{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import'./Header.css';import WhiteTT from'../assets/WhiteTT.png';// Assume the image path is correct\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const[user,setUser]=useState(null);const[dropdownVisible,setDropdownVisible]=useState(false);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('token');if(token){fetch('http://localhost:5001/api/user-info',{method:'GET',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}}).then(response=>{if(response.status===401){localStorage.removeItem('token');throw new Error('Unauthorized');}if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{setUser(data);}).catch(error=>{console.error('Failed to fetch user info:',error);navigate('/login');});}},[navigate]);const handleLogout=()=>{localStorage.removeItem('token');setUser(null);navigate('/login');};const toggleDropdown=()=>{setDropdownVisible(!dropdownVisible);};const handleIconClick=()=>{navigate('/');};return/*#__PURE__*/_jsxs(\"nav\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{src:WhiteTT,alt:\"Logo\",className:\"logo\",onClick:handleIconClick}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-links\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/about-us\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/meet-the-brothers\",children:\"Meet The Brothers\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/events\",children:\"Events\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/rush\",children:\"Rush\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-link\",children:/*#__PURE__*/_jsx(\"ul\",{children:user?/*#__PURE__*/_jsxs(\"li\",{className:\"dropdown\",onClick:toggleDropdown,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'white',cursor:'pointer'},children:user.firstName&&user.lastName?`${user.firstName} ${user.lastName}`:user.email}),dropdownVisible&&/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"dropdown-item\",children:\"Dashboard\"}),user.role==='Admin'&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"dropdown-item\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"span\",{onClick:handleLogout,className:\"dropdown-item\",children:\"Logout\"})]})]}):/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})})})})]});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","WhiteTT","jsx","_jsx","jsxs","_jsxs","Header","user","setUser","dropdownVisible","setDropdownVisible","navigate","token","localStorage","getItem","fetch","method","headers","then","response","status","removeItem","Error","ok","json","data","catch","error","console","handleLogout","toggleDropdown","handleIconClick","className","children","src","alt","onClick","to","style","color","cursor","firstName","lastName","email","role"],"sources":["/Users/tavenharris/Documents/GitHub/scu_tt_website/src/components/Header/Header.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Link, useNavigate} from 'react-router-dom';\nimport './Header.css';\nimport WhiteTT from '../assets/WhiteTT.png'; // Assume the image path is correct\n\nconst Header = () => {\n    const [user, setUser] = useState(null);\n    const [dropdownVisible, setDropdownVisible] = useState(false);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            fetch('http://localhost:5001/api/user-info', {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${token}`,\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(response => {\n                    if (response.status === 401) {\n                        localStorage.removeItem('token');\n                        throw new Error('Unauthorized');\n                    }\n                    if (!response.ok) {\n                        throw new Error('Network response was not ok');\n                    }\n                    return response.json();\n                })\n                .then(data => {\n                    setUser(data);\n                })\n                .catch(error => {\n                    console.error('Failed to fetch user info:', error);\n                    navigate('/login');\n                });\n        }\n    }, [navigate]);\n\n    const handleLogout = () => {\n        localStorage.removeItem('token');\n        setUser(null);\n        navigate('/login');\n    };\n\n    const toggleDropdown = () => {\n        setDropdownVisible(!dropdownVisible);\n    };\n\n    const handleIconClick = () => {\n        navigate('/');\n    };\n\n    return (\n        <nav className=\"header\">\n            <img src={WhiteTT} alt=\"Logo\" className=\"logo\" onClick={handleIconClick}/>\n            <div className=\"nav-links\">\n                <ul>\n                    <li><Link to=\"/\">Home</Link></li>\n                    <li><Link to=\"/about-us\">About Us</Link></li>\n                    <li><Link to=\"/meet-the-brothers\">Meet The Brothers</Link></li>\n                    <li><Link to=\"/events\">Events</Link></li>\n                    <li><Link to=\"/rush\">Rush</Link></li>\n                </ul>\n            </div>\n            <div className=\"login-link\">\n                <ul>\n                    {user ? (\n                        <li className=\"dropdown\" onClick={toggleDropdown}>\n                            <span style={{color: 'white', cursor: 'pointer'}}>\n                                {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n                            </span>\n                            {dropdownVisible && (\n                                <div className=\"dropdown-menu\">\n                                    <Link to=\"/dashboard\" className=\"dropdown-item\">Dashboard</Link>\n                                    {user.role === 'Admin' && <Link to=\"/admin\" className=\"dropdown-item\">Admin</Link>}\n                                    <span onClick={handleLogout} className=\"dropdown-item\">Logout</span>\n                                </div>\n                            )}\n                        </li>\n                    ) : (\n                        <li><Link to=\"/login\">Login</Link></li>\n                    )}\n                </ul>\n            </div>\n        </nav>\n    );\n};\n\nexport default Header;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,OAAQC,IAAI,CAAEC,WAAW,KAAO,kBAAkB,CAClD,MAAO,cAAc,CACrB,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,eAAe,CAAEC,kBAAkB,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAAa,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAe,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACPG,KAAK,CAAC,qCAAqC,CAAE,CACzCC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,eAAe,CAAE,UAAUL,KAAK,EAAE,CAClC,cAAc,CAAE,kBACpB,CACJ,CAAC,CAAC,CACGM,IAAI,CAACC,QAAQ,EAAI,CACd,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CACzBP,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,CAChC,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAc,CAAC,CACnC,CACA,GAAI,CAACH,QAAQ,CAACI,EAAE,CAAE,CACd,KAAM,IAAI,CAAAD,KAAK,CAAC,6BAA6B,CAAC,CAClD,CACA,MAAO,CAAAH,QAAQ,CAACK,IAAI,CAAC,CAAC,CAC1B,CAAC,CAAC,CACDN,IAAI,CAACO,IAAI,EAAI,CACVjB,OAAO,CAACiB,IAAI,CAAC,CACjB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACZC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDhB,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAAC,CACV,CACJ,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAkB,YAAY,CAAGA,CAAA,GAAM,CACvBhB,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,CAChCb,OAAO,CAAC,IAAI,CAAC,CACbG,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAED,KAAM,CAAAmB,cAAc,CAAGA,CAAA,GAAM,CACzBpB,kBAAkB,CAAC,CAACD,eAAe,CAAC,CACxC,CAAC,CAED,KAAM,CAAAsB,eAAe,CAAGA,CAAA,GAAM,CAC1BpB,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,CAED,mBACIN,KAAA,QAAK2B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACnB9B,IAAA,QAAK+B,GAAG,CAAEjC,OAAQ,CAACkC,GAAG,CAAC,MAAM,CAACH,SAAS,CAAC,MAAM,CAACI,OAAO,CAAEL,eAAgB,CAAC,CAAC,cAC1E5B,IAAA,QAAK6B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACtB5B,KAAA,OAAA4B,QAAA,eACI9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,GAAG,CAAAJ,QAAA,CAAC,MAAI,CAAM,CAAC,CAAI,CAAC,cACjC9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,WAAW,CAAAJ,QAAA,CAAC,UAAQ,CAAM,CAAC,CAAI,CAAC,cAC7C9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,oBAAoB,CAAAJ,QAAA,CAAC,mBAAiB,CAAM,CAAC,CAAI,CAAC,cAC/D9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,SAAS,CAAAJ,QAAA,CAAC,QAAM,CAAM,CAAC,CAAI,CAAC,cACzC9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,OAAO,CAAAJ,QAAA,CAAC,MAAI,CAAM,CAAC,CAAI,CAAC,EACrC,CAAC,CACJ,CAAC,cACN9B,IAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvB9B,IAAA,OAAA8B,QAAA,CACK1B,IAAI,cACDF,KAAA,OAAI2B,SAAS,CAAC,UAAU,CAACI,OAAO,CAAEN,cAAe,CAAAG,QAAA,eAC7C9B,IAAA,SAAMmC,KAAK,CAAE,CAACC,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,SAAS,CAAE,CAAAP,QAAA,CAC5C1B,IAAI,CAACkC,SAAS,EAAIlC,IAAI,CAACmC,QAAQ,CAAG,GAAGnC,IAAI,CAACkC,SAAS,IAAIlC,IAAI,CAACmC,QAAQ,EAAE,CAAGnC,IAAI,CAACoC,KAAK,CAClF,CAAC,CACNlC,eAAe,eACZJ,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC1B9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,YAAY,CAACL,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,CAC/D1B,IAAI,CAACqC,IAAI,GAAK,OAAO,eAAIzC,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,QAAQ,CAACL,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cAClF9B,IAAA,SAAMiC,OAAO,CAAEP,YAAa,CAACG,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,EACnE,CACR,EACD,CAAC,cAEL9B,IAAA,OAAA8B,QAAA,cAAI9B,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,QAAQ,CAAAJ,QAAA,CAAC,OAAK,CAAM,CAAC,CAAI,CACzC,CACD,CAAC,CACJ,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA3B,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}